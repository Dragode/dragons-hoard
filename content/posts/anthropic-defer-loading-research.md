+++
date = '2026-02-01T22:07:43+08:00'
draft = false
title = 'Anthropic defer_loading æ·±åº¦è°ƒç ”æŠ¥å‘Š'
tags = ['AI', 'Agent', 'MCP', 'Claude Code', 'API']
categories = ['æŠ€æœ¯è°ƒç ”']
+++

# Anthropic defer_loading æ·±åº¦è°ƒç ”æŠ¥å‘Š

> è°ƒç ”æ—¥æœŸï¼š2026-02-01

## ä¸€ã€æ¦‚è¿°

`defer_loading` æ˜¯ Anthropic äº **2025 å¹´ 11 æœˆ 24 æ—¥**å‘å¸ƒçš„ **Advanced Tool Useï¼ˆé«˜çº§å·¥å…·ä½¿ç”¨ï¼‰** ç‰¹æ€§ä¹‹ä¸€ï¼Œå±äº Tool Search Tool åŠŸèƒ½çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ã€‚è¯¥ç‰¹æ€§é€šè¿‡å»¶è¿ŸåŠ è½½æœºåˆ¶ï¼Œè®© Claude èƒ½å¤ŸåŠ¨æ€å‘ç°å’ŒæŒ‰éœ€åŠ è½½å·¥å…·ï¼Œè€Œä¸æ˜¯åœ¨å¯¹è¯å¼€å§‹æ—¶å°†æ‰€æœ‰å·¥å…·å®šä¹‰å¡å…¥ä¸Šä¸‹æ–‡çª—å£ã€‚

## äºŒã€å‘å¸ƒæ—¶é—´ä¸ç‰ˆæœ¬ä¿¡æ¯

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| **å‘å¸ƒæ—¥æœŸ** | 2025 å¹´ 11 æœˆ 24 æ—¥ |
| **å‘å¸ƒå…¬å‘Š** | [Introducing advanced tool use on the Claude Developer Platform](https://www.anthropic.com/engineering/advanced-tool-use) |
| **Beta Header** | `advanced-tool-use-2025-11-20` |
| **Tool Search ç‰ˆæœ¬** | `tool_search_tool_regex_20251119`ï¼ˆæ­£åˆ™ï¼‰<br>`tool_search_tool_bm25_20251119`ï¼ˆBM25ï¼‰ |
| **æ”¯æŒæ¨¡å‹** | Claude Opus 4.5ã€Claude Sonnet 4.5 åŠä»¥ä¸Š |
| **çŠ¶æ€** | å…¬å¼€ Beta |

## ä¸‰ã€å‡ºç°èƒŒæ™¯ï¼šè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

### 3.1 æ ¸å¿ƒç—›ç‚¹ï¼šå·¥å…·å®šä¹‰çš„ä¸Šä¸‹æ–‡è†¨èƒ€

éšç€ MCPï¼ˆModel Context Protocolï¼‰å’Œ AI Agent çš„å‘å±•ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­å¾€å¾€éœ€è¦è¿æ¥å¤šä¸ªæœåŠ¡å™¨ã€ä½¿ç”¨å¤§é‡å·¥å…·ã€‚Anthropic åœ¨åšå®¢ä¸­ç»™å‡ºäº†ä¸€ä¸ªå…¸å‹åœºæ™¯ï¼š

| MCP æœåŠ¡å™¨ | å·¥å…·æ•°é‡ | Token æ¶ˆè€— |
|------------|---------|-----------|
| GitHub | 35 | ~26K tokens |
| Slack | 11 | ~21K tokens |
| Sentry | 5 | ~3K tokens |
| Grafana | 5 | ~3K tokens |
| Splunk | 2 | ~2K tokens |
| **æ€»è®¡** | **58** | **~55K tokens** |

åŠ ä¸Š Jiraï¼ˆ~17K tokensï¼‰ï¼Œå¾ˆå¿«å°±ä¼šè¾¾åˆ° **100K+ tokens** çš„å¼€é”€â€”â€”**å¯¹è¯è¿˜æ²¡å¼€å§‹ï¼Œä¸Šä¸‹æ–‡çª—å£å°±å·²ç»è¢«å·¥å…·å®šä¹‰å æ»¡äº†**ã€‚

Anthropic å†…éƒ¨æµ‹è¯•æ˜¾ç¤ºï¼Œå·¥å…·å®šä¹‰æ›¾æ¶ˆè€—é«˜è¾¾ **134K tokens**ã€‚

### 3.2 æ¬¡è¦ç—›ç‚¹ï¼šå·¥å…·é€‰æ‹©å‡†ç¡®æ€§ä¸‹é™

å½“å·¥å…·æ•°é‡è¶…è¿‡ **20-30 ä¸ª**æ—¶ï¼Œæ¨¡å‹é€‰æ‹©æ­£ç¡®å·¥å…·çš„èƒ½åŠ›ä¼šæ˜¾è‘—ä¸‹é™ã€‚ç‰¹åˆ«æ˜¯å½“å·¥å…·åç§°ç›¸ä¼¼æ—¶ï¼ˆå¦‚ `notification-send-user` vs `notification-send-channel`ï¼‰ï¼Œé”™è¯¯é€‰æ‹©å’Œå‚æ•°é”™è¯¯æ˜¯æœ€å¸¸è§çš„å¤±è´¥æ¨¡å¼ã€‚

### 3.3 é—®é¢˜æ€»ç»“

| é—®é¢˜ | å½±å“ |
|------|------|
| **ä¸Šä¸‹æ–‡è†¨èƒ€** | 50 ä¸ªå·¥å…· â‰ˆ 10-20K tokensï¼Œä¸¥é‡æŒ¤å å¯¹è¯ç©ºé—´ |
| **é€‰æ‹©å‡†ç¡®æ€§ä¸‹é™** | 30-50 ä¸ªå·¥å…·åï¼Œå·¥å…·é€‰æ‹©é”™è¯¯ç‡æ˜¾è‘—ä¸Šå‡ |
| **æˆæœ¬å¢åŠ ** | Token æ¶ˆè€—ç›´æ¥å½±å“ API è°ƒç”¨æˆæœ¬ |
| **å“åº”å»¶è¿Ÿ** | æ›´å¤§çš„ä¸Šä¸‹æ–‡æ„å‘³ç€æ›´æ…¢çš„æ¨ç†é€Ÿåº¦ |

## å››ã€defer_loading çš„è§£å†³æ–¹æ¡ˆ

### 4.1 æ ¸å¿ƒæœºåˆ¶

```
ä¼ ç»Ÿæ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸Šä¸‹æ–‡çª—å£                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å·¥å…·1å®šä¹‰ â”‚ å·¥å…·2å®šä¹‰ â”‚ ... â”‚ å·¥å…·50å®šä¹‰ â”‚ å¯¹è¯  â”‚ â”‚
â”‚ â”‚  (~72K tokens è¢«å·¥å…·å®šä¹‰å æ®)                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨ defer_loadingï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸Šä¸‹æ–‡çª—å£                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Tool Search Tool â”‚ 3-5ä¸ªæŒ‰éœ€åŠ è½½çš„å·¥å…· â”‚ å¯¹è¯ç©ºé—´ â”‚ â”‚
â”‚ â”‚    (~500 tokens)    (~3K tokens)    (å¤§é‡å¯ç”¨)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ å»¶è¿ŸåŠ è½½æ± ï¼ˆä¸å ç”¨ä¸Šä¸‹æ–‡ï¼‰                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ å·¥å…·1 â”‚ å·¥å…·2 â”‚ ... â”‚ å·¥å…·10000 (å¯æ‰©å±•è‡³ä¸‡çº§)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 å·¥ä½œæµç¨‹

1. **æ ‡è®°å·¥å…·**ï¼šåœ¨å·¥å…·å®šä¹‰ä¸­æ·»åŠ  `defer_loading: true`
2. **åˆå§‹åŠ è½½**ï¼šClaude åªçœ‹åˆ° Tool Search Toolï¼ˆ~500 tokensï¼‰+ éå»¶è¿Ÿå·¥å…·
3. **åŠ¨æ€æœç´¢**ï¼šå½“ Claude éœ€è¦ç‰¹å®šèƒ½åŠ›æ—¶ï¼Œé€šè¿‡æœç´¢å‘ç°ç›¸å…³å·¥å…·
4. **æŒ‰éœ€æ‰©å±•**ï¼šAPI è¿”å› 3-5 ä¸ªæœ€ç›¸å…³çš„å·¥å…·å¼•ç”¨ï¼Œè‡ªåŠ¨å±•å¼€ä¸ºå®Œæ•´å®šä¹‰
5. **æ‰§è¡Œè°ƒç”¨**ï¼šClaude ä»å‘ç°çš„å·¥å…·ä¸­é€‰æ‹©å¹¶è°ƒç”¨

### 4.3 ä»£ç ç¤ºä¾‹

```python
# åŸºç¡€ç”¨æ³•
{
    "tools": [
        # Tool Search Toolï¼ˆå¿…é¡»éå»¶è¿Ÿï¼‰
        {
            "type": "tool_search_tool_regex_20251119",
            "name": "tool_search_tool_regex"
        },
        # æ ‡è®°ä¸ºå»¶è¿ŸåŠ è½½çš„å·¥å…·
        {
            "name": "github.createPullRequest",
            "description": "Create a pull request",
            "input_schema": {...},
            "defer_loading": True  # å…³é”®æ ‡è®°
        },
        # ... æ›´å¤šå»¶è¿ŸåŠ è½½çš„å·¥å…·
    ]
}

# MCP æœåŠ¡å™¨æ•´ä½“é…ç½®
{
    "type": "mcp_toolset",
    "mcp_server_name": "google-drive",
    "default_config": {"defer_loading": True},  # é»˜è®¤å…¨éƒ¨å»¶è¿Ÿ
    "configs": {
        "search_files": {"defer_loading": False}  # ä¿ç•™é«˜é¢‘å·¥å…·
    }
}
```

## äº”ã€ä¸ä¼ ç»Ÿå·¥å…·è°ƒç”¨çš„å¯¹æ¯”

### 5.1 æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ä¼ ç»Ÿæ–¹å¼ | ä½¿ç”¨ defer_loading | æ”¹å–„ |
|------|---------|-------------------|------|
| **åˆå§‹ Token æ¶ˆè€—** | ~77K tokens | ~8.7K tokens | **â†“ 85%** |
| **ä¸Šä¸‹æ–‡ä¿ç•™** | ~5% å¯ç”¨ | ~95% å¯ç”¨ | **â†‘ 90%** |
| **æœ€å¤§å·¥å…·æ•°** | 30-50 ä¸ªï¼ˆå®ç”¨ï¼‰ | **10,000 ä¸ª** | **â†‘ 200x** |

### 5.2 å‡†ç¡®æ€§æå‡

| æ¨¡å‹ | ä¼ ç»Ÿæ–¹å¼ | Tool Search | æå‡ |
|------|---------|-------------|------|
| **Claude Opus 4** | 49% | 74% | **+25%** |
| **Claude Opus 4.5** | 79.5% | 88.1% | **+8.6%** |

### 5.3 åŠŸèƒ½å¯¹æ¯”

| ç‰¹æ€§ | ä¼ ç»Ÿå·¥å…·è°ƒç”¨ | defer_loading |
|------|------------|---------------|
| å·¥å…·å‘ç° | é™æ€ï¼ˆå…¨éƒ¨é¢„åŠ è½½ï¼‰ | åŠ¨æ€ï¼ˆæŒ‰éœ€æœç´¢ï¼‰ |
| Token æ•ˆç‡ | ä½ï¼ˆå…¨é‡åŠ è½½ï¼‰ | é«˜ï¼ˆä»…åŠ è½½æ‰€éœ€ï¼‰ |
| æ‰©å±•æ€§ | å—é™ï¼ˆ30-50 å·¥å…·ï¼‰ | é«˜ï¼ˆä¸‡çº§å·¥å…·ï¼‰ |
| Prompt ç¼“å­˜ | å®Œå…¨å…¼å®¹ | å…¼å®¹ï¼ˆå»¶è¿Ÿå·¥å…·ä¸å½±å“ç¼“å­˜ï¼‰ |
| æœç´¢æ–¹å¼ | æ—  | Regex / BM25 |
| å®ç°å¤æ‚åº¦ | ç®€å• | ä¸­ç­‰ï¼ˆéœ€é…ç½®æœç´¢å·¥å…·ï¼‰ |

## å…­ã€æœ€ä½³å®è·µ

### 6.1 é€‚ç”¨åœºæ™¯

**æ¨èä½¿ç”¨ defer_loadingï¼š**
- å·¥å…·å®šä¹‰æ¶ˆè€— >10K tokens
- å¯ç”¨å·¥å…·æ•°é‡ >10 ä¸ª
- æ„å»º MCP é©±åŠ¨çš„å¤šæœåŠ¡å™¨ç³»ç»Ÿ
- é‡åˆ°å·¥å…·é€‰æ‹©å‡†ç¡®æ€§é—®é¢˜

**ä¸æ¨èä½¿ç”¨ï¼š**
- å·¥å…·æ•°é‡ <10 ä¸ª
- æ‰€æœ‰å·¥å…·åœ¨æ¯æ¬¡ä¼šè¯ä¸­éƒ½é¢‘ç¹ä½¿ç”¨
- å·¥å…·å®šä¹‰éå¸¸ç´§å‡‘

### 6.2 é…ç½®å»ºè®®

1. **ä¿ç•™ 3-5 ä¸ªé«˜é¢‘å·¥å…·**ä¸ºéå»¶è¿Ÿï¼Œç¡®ä¿å¸¸ç”¨æ“ä½œé›¶å»¶è¿Ÿ
2. **ä¼˜åŒ–å·¥å…·åç§°å’Œæè¿°**ï¼Œæå‡æœç´¢åŒ¹é…å‡†ç¡®æ€§
3. **åœ¨ System Prompt ä¸­è¯´æ˜å¯ç”¨å·¥å…·ç±»åˆ«**ï¼Œå¼•å¯¼ Claude æœç´¢æ–¹å‘
4. **ç»“åˆ Prompt Caching** è¿›ä¸€æ­¥ä¼˜åŒ–å¤šè½®å¯¹è¯æ€§èƒ½

## ä¸ƒã€å±€é™æ€§

| é™åˆ¶ | è¯´æ˜ |
|------|------|
| **æ¨¡å‹æ”¯æŒ** | ä»… Claude Sonnet 4.5+ å’Œ Opus 4.5+ï¼ˆä¸æ”¯æŒ Haikuï¼‰ |
| **æœ€å¤§å·¥å…·æ•°** | 10,000 ä¸ª |
| **æœç´¢è¿”å›** | æ¯æ¬¡æœç´¢è¿”å› 3-5 ä¸ªå·¥å…· |
| **Regex é•¿åº¦** | æœ€å¤§ 200 å­—ç¬¦ |
| **æ¡†æ¶æ”¯æŒ** | éœ€ç›´æ¥ä½¿ç”¨ Anthropic SDKï¼ŒLangChain ç­‰æ¡†æ¶æš‚æœªæ”¯æŒ |
| **ä¸å…¼å®¹ Tool Use Examples** | ä¸¤ä¸ªç‰¹æ€§ä¸èƒ½åŒæ—¶ä½¿ç”¨ |

## å…«ã€æ€»ç»“

### 8.1 defer_loading çš„æœ¬è´¨

`defer_loading` æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ **"å·¥å…·ç›®å½•åŒ–"** ç­–ç•¥ï¼š
- å°†å·¥å…·ä»"å…¨éƒ¨åŠ è½½åˆ°å†…å­˜"å˜ä¸º"å­˜å…¥å¯æœç´¢çš„ç›®å½•"
- Claude åœ¨éœ€è¦æ—¶"æŸ¥å­—å…¸"ï¼Œè€Œä¸æ˜¯"å…¨éƒ¨è®°åœ¨è„‘å­é‡Œ"
- ç±»ä¼¼äºæ•°æ®åº“çš„å»¶è¿ŸåŠ è½½/æ‡’åŠ è½½æ¨¡å¼åœ¨ LLM å·¥å…·è°ƒç”¨ä¸­çš„åº”ç”¨

### 8.2 æ ¸å¿ƒä»·å€¼

| ç»´åº¦ | ä»·å€¼ |
|------|------|
| **æˆæœ¬** | Token æ¶ˆè€—é™ä½ 85%ï¼Œç›´æ¥é™ä½ API æˆæœ¬ |
| **èƒ½åŠ›** | æ”¯æŒä¸‡çº§å·¥å…·ï¼Œè§£é”å¤æ‚ Agent åœºæ™¯ |
| **å‡†ç¡®æ€§** | å·¥å…·é€‰æ‹©å‡†ç¡®ç‡æå‡ 8-25% |
| **ä½“éªŒ** | æ›´å¤šä¸Šä¸‹æ–‡ç”¨äºå®é™…å¯¹è¯ï¼Œå“åº”æ›´å¿«æ›´å‡† |

### 8.3 é€‚åˆè°ï¼Ÿ

- æ„å»º **MCP å¤šæœåŠ¡å™¨é›†æˆ** çš„å¼€å‘è€…
- å¼€å‘ **ä¼ä¸šçº§ AI Agent**ï¼ˆéœ€è¿æ¥å¤šä¸ª SaaS ç³»ç»Ÿï¼‰
- ä»»ä½•é‡åˆ° **å·¥å…·å®šä¹‰è†¨èƒ€** é—®é¢˜çš„ Claude API ç”¨æˆ·

---

## ä¹ã€Claude Code é‡‡ç”¨æ—¶é—´çº¿

### å…³é”®æ—¶é—´èŠ‚ç‚¹

| æ—¥æœŸ | äº‹ä»¶ | ç‰ˆæœ¬ |
|------|------|------|
| **2025-11-24** | Anthropic å‘å¸ƒ Advanced Tool Useï¼ˆå« defer_loadingï¼‰API | - |
| **2025-12-01** | ç¤¾åŒºæäº¤ Feature Requestï¼ˆGitHub Issue #12836ï¼‰ | - |
| **2025-12-20** | å®éªŒæ€§æ ‡å¿— `ENABLE_EXPERIMENTAL_MCP_CLI` å¯ç”¨ | ~2.1.x |
| **2026-01-14** | Anthropic å®˜æ–¹å®£å¸ƒ Claude Code æ”¯æŒ MCP Tool Search | 2.1.7 |
| **2026-01-14** | **MCP Tool Search auto mode é»˜è®¤å¯ç”¨** | **2.1.7** |
| **2026-01-15** | 2.1.9 ç‰ˆæœ¬æ·»åŠ  `auto:N` è¯­æ³•è‡ªå®šä¹‰é˜ˆå€¼ | 2.1.9 |

### è¯¦ç»†å‘å±•è¿‡ç¨‹

#### é˜¶æ®µ 1ï¼šAPI å‘å¸ƒä¸ç¤¾åŒºéœ€æ±‚ï¼ˆ2025-11 ~ 2025-12ï¼‰

**2025-11-24**ï¼šAnthropic å‘å¸ƒ Advanced Tool Use APIï¼ŒåŒ…å«ï¼š
- Tool Search Toolï¼ˆ`defer_loading: true`ï¼‰
- Programmatic Tool Calling
- Tool Use Examples

**2025-12-01**ï¼šç”¨æˆ· `matthewod11-stack` åœ¨ GitHub æäº¤ Issue #12836ï¼Œè¯·æ±‚ Claude Code æ”¯æŒè¿™äº›æ–°ç‰¹æ€§ã€‚è¯¥ issue è·å¾— **104+ ä¸ª ğŸ‘**ï¼Œæˆä¸º"æœ€å—è¯·æ±‚çš„åŠŸèƒ½ä¹‹ä¸€"ã€‚

ç¤¾åŒºç—›ç‚¹æè¿°ï¼ˆæ¥è‡ª Issueï¼‰ï¼š
> "Claude Code loads all tool definitions upfront at session start, which consumes significant context tokens - especially for users with multiple MCP servers, plugins, and agents configured."

#### é˜¶æ®µ 2ï¼šå®éªŒæ€§æ”¯æŒï¼ˆ2025-12ï¼‰

åœ¨æ­£å¼å‘å¸ƒå‰ï¼ŒAnthropic æä¾›äº†å®éªŒæ€§æ ‡å¿—ï¼š

```bash
ENABLE_EXPERIMENTAL_MCP_CLI=true
```

ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½®æ­¤ç¯å¢ƒå˜é‡æå‰ä½“éªŒ defer_loading åŠŸèƒ½ã€‚

#### é˜¶æ®µ 3ï¼šæ­£å¼å‘å¸ƒï¼ˆ2026-01-14ï¼‰

**2026-01-14**ï¼ŒAnthropic æŠ€æœ¯äººå‘˜ **Thariq Shihipar** å®£å¸ƒï¼š

> "Today we're rolling out MCP Tool Search for Claude Code. As MCP has grown to become a more popular protocol and agents have become more capable, we've found that MCP servers may have up to 50+ tools and take up a large amount of context. Tool Search allows Claude Code to dynamically load tools into context when MCP tools would otherwise take up a lot of context."

**ç‰ˆæœ¬ 2.1.7** çš„ Changelog æ˜ç¡®è®°å½•ï¼š

```
Enabled MCP tool search auto mode by default for all users.
When MCP tool descriptions exceed 10% of the context window,
they are automatically deferred and discovered via the MCPSearch
tool instead of being loaded upfront. This reduces context usage
for users with many MCP tools configured. Users can disable this
by adding `MCPSearch` to `disallowedTools` in their settings.
```

#### é˜¶æ®µ 4ï¼šæŒç»­ä¼˜åŒ–ï¼ˆ2026-01-15+ï¼‰

**ç‰ˆæœ¬ 2.1.9** æ·»åŠ äº†æ›´çµæ´»çš„é…ç½®ï¼š

```
Added `auto:N` syntax for configuring the MCP tool search
auto-enable threshold, where N is the context window percentage (0-100)
```

è¿™å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è§¦å‘ Tool Search çš„é˜ˆå€¼ï¼ˆé»˜è®¤ 10%ï¼‰ã€‚

### Claude Code ä¸­çš„å·¥ä½œæœºåˆ¶

```
å¯åŠ¨æ—¶æ£€æµ‹
    â”‚
    â–¼
MCP å·¥å…·æè¿°å ç”¨ > 10% ä¸Šä¸‹æ–‡ï¼Ÿ
    â”‚
    â”œâ”€ å¦ â†’ ä¼ ç»Ÿæ–¹å¼ï¼šå…¨éƒ¨åŠ è½½
    â”‚
    â””â”€ æ˜¯ â†’ å¯ç”¨ Tool Search
              â”‚
              â”œâ”€ æ ‡è®°å·¥å…·ä¸º defer_loading: true
              â”œâ”€ æ³¨å…¥ MCPSearch å·¥å…·
              â””â”€ æŒ‰éœ€å‘ç°å’ŒåŠ è½½å·¥å…·
```

### é…ç½®æ–¹å¼

#### è‡ªåŠ¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
- å½“ MCP å·¥å…·å ç”¨è¶…è¿‡ 10% ä¸Šä¸‹æ–‡æ—¶è‡ªåŠ¨å¯ç”¨
- æ— éœ€ä»»ä½•é…ç½®

#### ç¦ç”¨ Tool Search
```json
// settings.json
{
  "disallowedTools": ["MCPSearch"]
}
```

#### è‡ªå®šä¹‰é˜ˆå€¼ï¼ˆ2.1.9+ï¼‰
```json
// è®¾ç½®ä¸º 5% é˜ˆå€¼
{
  "mcpToolSearch": "auto:5"
}
```

### å‘å¸ƒå‰åå¯¹æ¯”

#### å‘å¸ƒå‰ç”¨æˆ·åé¦ˆ

**Scott Spence** è®°å½•çš„å®é™…æ•°æ®ï¼š
- å¯åŠ¨ Claude Code åï¼Œ**66,000 tokens ç«‹å³æ¶ˆå¤±**ï¼ˆå  200K ä¸Šä¸‹æ–‡çš„ 33%ï¼‰
- MCP å·¥å…·æ¶ˆè€— 82K tokensï¼ˆ41% ä¸Šä¸‹æ–‡ï¼‰
- åªå‰© 12K tokensï¼ˆ5.8%ï¼‰çš„å¯ç”¨ç©ºé—´

**Sam McLeod** çš„ MCP æœåŠ¡å™¨åˆ†æï¼š

| MCP æœåŠ¡å™¨ | å·¥å…·æ•° | Token æ¶ˆè€— |
|------------|--------|-----------|
| GitHub | 91 | ~46,000 |
| Playwright | 21 | ~9,700 |
| AWS Cost Explorer | 7 | ~9,100 |
| Docker | 135 | ~125,000 |

#### å‘å¸ƒåæ•ˆæœ

**Token èŠ‚çœ**ï¼šä» ~134K é™è‡³ ~5Kï¼ˆ**85% å‡å°‘**ï¼‰

**å‡†ç¡®æ€§æå‡**ï¼š
- Opus 4: 49% â†’ 74%
- Opus 4.5: 79.5% â†’ 88.1%

### ç¤¾åŒºåå“

**Simon Willison**ï¼ˆçŸ¥åå¼€å‘è€…ï¼‰ï¼š
> "Context pollution is why I rarely used MCP, now that it's solved there's no reason not to hook up dozens or even hundreds of MCPs to Claude Code"

**Boris Cherny**ï¼ˆClaude Code è´Ÿè´£äººï¼‰ï¼š
> "Every Claude Code user just got way more context, better instruction following, and the ability to plug in even more tools."

**VentureBeat** è¯„ä»·ï¼š
> "The Claude Code team released an update that fundamentally alters this equation... It is a shift that moves AI agents from a brute-force architecture to something resembling modern software engineering."

### æ—¶é—´çº¿æ€»ç»“

| é—®é¢˜ | ç­”æ¡ˆ |
|------|------|
| **API ä½•æ—¶å‘å¸ƒ** | 2025-11-24 |
| **Claude Code ä½•æ—¶æ”¯æŒ** | 2026-01-14ï¼Œç‰ˆæœ¬ 2.1.7 |
| **ä» API åˆ° CLI çš„å»¶è¿Ÿ** | ~51 å¤© |
| **é»˜è®¤è¡Œä¸º** | è‡ªåŠ¨å¯ç”¨ï¼ˆMCP å·¥å…· > 10% ä¸Šä¸‹æ–‡æ—¶ï¼‰ |
| **å¯å¦ç¦ç”¨** | å¯ä»¥ï¼Œæ·»åŠ  `MCPSearch` åˆ° `disallowedTools` |

---

## åã€ä¿¡æ¯æ¥æº

| æ¥æº | ç±»å‹ | æ—¥æœŸ |
|------|------|------|
| [Anthropic Engineering Blog](https://www.anthropic.com/engineering/advanced-tool-use) | å®˜æ–¹å…¬å‘Š | 2025-11-24 |
| [Claude API Docs - Tool Search Tool](https://platform.claude.com/docs/en/agents-and-tools/tool-use/tool-search-tool) | å®˜æ–¹æ–‡æ¡£ | - |
| [Claude Code Changelog](https://code.claude.com/docs/en/changelog) | å®˜æ–¹æ–‡æ¡£ | - |
| [GitHub Issue #12836](https://github.com/anthropics/claude-code/issues/12836) | ç¤¾åŒºè®¨è®º | 2025-12-01 |
| [VentureBeat æŠ¥é“](https://venturebeat.com/orchestration/claude-code-just-got-updated-with-one-of-the-most-requested-user-features) | åª’ä½“æŠ¥é“ | 2026-01-15 |
| [Unified.to Blog](https://unified.to/blog/scaling_mcp_tools_with_anthropic_defer_loading) | æŠ€æœ¯åšå®¢ | 2025-12-27 |
| [Arcade Blog](https://blog.arcade.dev/anthropic-tool-search-claude-mcp-runtime) | æŠ€æœ¯åˆ†æ | 2025-12-02 |
| [atcyrus.com æ·±åº¦è§£æ](https://www.atcyrus.com/stories/mcp-tool-search-claude-code-context-pollution-guide) | æŠ€æœ¯åšå®¢ | 2026-01-15 |
